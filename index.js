require("dotenv").config();
const express = require("express");
const { Client, GatewayIntentBits, EmbedBuilder } = require("discord.js");

const app = express();
app.get("/", (req, res) => {
  res.send("Azkar Bot is running!");
});
app.listen(3000, () => console.log("Web server started"));

const TOKEN = process.env.TOKEN;
const CHANNEL_ID = process.env.CHANNEL_ID;

const client = new Client({
  intents: [GatewayIntentBits.Guilds],
});

const azkar = [
  "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ðŸŒ¿",
  "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ ðŸ¤",
  "Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø± ðŸ•Œ",
  "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ âœ¨",
  "Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ… ÙˆØ£ØªÙˆØ¨ Ø¥Ù„ÙŠÙ‡ ðŸ™",
  "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡ ðŸŒ¸",
  "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ… ðŸŒ¼",
  "Ù„Ø§ Ø­ÙˆÙ„ ÙˆÙ„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡ ðŸ’«",
  "Ø§Ù„Ù„Ù‡Ù… ØµÙ„ ÙˆØ³Ù„Ù… Ø¹Ù„Ù‰ Ù†Ø¨ÙŠÙ†Ø§ Ù…Ø­Ù…Ø¯ ï·º ðŸ¤",
  "Ø­Ø³Ø¨ÙŠ Ø§Ù„Ù„Ù‡ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ù‡Ùˆ Ø¹Ù„ÙŠÙ‡ ØªÙˆÙƒÙ„Øª ÙˆÙ‡Ùˆ Ø±Ø¨ Ø§Ù„Ø¹Ø±Ø´ Ø§Ù„Ø¹Ø¸ÙŠÙ… ðŸŒ™",
  "Ø±Ø¶ÙŠØª Ø¨Ø§Ù„Ù„Ù‡ Ø±Ø¨Ø§Ù‹ ÙˆØ¨Ø§Ù„Ø¥Ø³Ù„Ø§Ù… Ø¯ÙŠÙ†Ø§Ù‹ ÙˆØ¨Ù…Ø­Ù…Ø¯ ï·º Ù†Ø¨ÙŠØ§Ù‹ ÙˆØ±Ø³ÙˆÙ„Ø§Ù‹ ðŸ¤",
  "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†Ùƒ Ø¹ÙÙˆ ØªØ­Ø¨ Ø§Ù„Ø¹ÙÙˆ ÙØ§Ø¹ÙÙ Ø¹Ù†Ø§ ðŸ¤²",
  "Ø±Ø¨ Ø§ØºÙØ± Ù„ÙŠ ÙˆØªØ¨ Ø¹Ù„ÙŠ Ø¥Ù†Ùƒ Ø£Ù†Øª Ø§Ù„ØªÙˆØ§Ø¨ Ø§Ù„Ø±Ø­ÙŠÙ… ðŸŒ¿",
  "Ø§Ù„Ù„Ù‡Ù… Ø¢ØªÙ†Ø§ ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ Ø­Ø³Ù†Ø© ÙˆÙÙŠ Ø§Ù„Ø¢Ø®Ø±Ø© Ø­Ø³Ù†Ø© ÙˆÙ‚Ù†Ø§ Ø¹Ø°Ø§Ø¨ Ø§Ù„Ù†Ø§Ø± ðŸ”¥",
  "Ø±Ø¨Ù†Ø§ Ù„Ø§ ØªØ²Øº Ù‚Ù„ÙˆØ¨Ù†Ø§ Ø¨Ø¹Ø¯ Ø¥Ø° Ù‡Ø¯ÙŠØªÙ†Ø§ ÙˆÙ‡Ø¨ Ù„Ù†Ø§ Ù…Ù† Ù„Ø¯Ù†Ùƒ Ø±Ø­Ù…Ø© ðŸ¤",
  "ÙŠØ§ Ø­ÙŠ ÙŠØ§ Ù‚ÙŠÙˆÙ… Ø¨Ø±Ø­Ù…ØªÙƒ Ø£Ø³ØªØºÙŠØ« Ø£ØµÙ„Ø­ Ù„ÙŠ Ø´Ø£Ù†ÙŠ ÙƒÙ„Ù‡ ðŸ™",
  "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø±Ø¨ÙŠØ¹ Ù‚Ù„ÙˆØ¨Ù†Ø§ ÙˆÙ†ÙˆØ± ØµØ¯ÙˆØ±Ù†Ø§ ðŸ“–",
  "Ø±Ø¨ Ø§Ø´Ø±Ø­ Ù„ÙŠ ØµØ¯Ø±ÙŠ ÙˆÙŠØ³Ø± Ù„ÙŠ Ø£Ù…Ø±ÙŠ ðŸ’™",
  "Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„Ù„Ù…Ø¤Ù…Ù†ÙŠÙ† ÙˆØ§Ù„Ù…Ø¤Ù…Ù†Ø§Øª ðŸ¤²",
  "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø§Ù„Ø¬Ù†Ø© ÙˆØ£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø§Ù„Ù†Ø§Ø± ðŸŒ¿",
  "Ø§Ù„Ù„Ù‡Ù… Ø«Ø¨Øª Ù‚Ù„Ø¨ÙŠ Ø¹Ù„Ù‰ Ø¯ÙŠÙ†Ùƒ ðŸ¤",
  "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø¹Ø¯Ø¯ Ø®Ù„Ù‚Ù‡ ÙˆØ±Ø¶Ø§ Ù†ÙØ³Ù‡ ÙˆØ²Ù†Ø© Ø¹Ø±Ø´Ù‡ ÙˆÙ…Ø¯Ø§Ø¯ ÙƒÙ„Ù…Ø§ØªÙ‡ âœ¨",
  "Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø²Ù‚Ù†Ø§ Ø­Ø³Ù† Ø§Ù„Ø®Ø§ØªÙ…Ø© ðŸŒ™",
  "Ø§Ù„Ù„Ù‡Ù… Ø§Ø´Ù Ù…Ø±Ø¶Ø§Ù†Ø§ ÙˆÙ…Ø±Ø¶Ù‰ Ø§Ù„Ù…Ø³Ù„Ù…ÙŠÙ† ðŸ¤²",
  "Ø§Ù„Ù„Ù‡Ù… ÙØ±Ø¬ Ù‡Ù… Ø§Ù„Ù…Ù‡Ù…ÙˆÙ…ÙŠÙ† ÙˆÙ†ÙØ³ ÙƒØ±Ø¨ Ø§Ù„Ù…ÙƒØ±ÙˆØ¨ÙŠÙ† ðŸ’›"
];

async function sendZikr(channel) {
  const randomZikr = azkar[Math.floor(Math.random() * azkar.length)];

  const embed = new EmbedBuilder()
    .setColor(0x2ecc71)
    .setTitle("ðŸ“¿ Ø°ÙƒØ± Ø§Ù„ÙŠÙˆÙ…")
    .setDescription(`âœ¨ ${randomZikr}`)
    .setFooter({ text: "ðŸ¤ Azkar Bot - Ù„Ø§ ØªÙ†Ø³ÙŽ Ø°ÙƒØ± Ø§Ù„Ù„Ù‡" })
    .setTimestamp();

  await channel.send({ embeds: [embed] });
}

client.once("ready", async () => {
  console.log(`Logged in as ${client.user.tag}`);

  const channel = await client.channels.fetch(CHANNEL_ID);
  if (!channel) return console.log("Channel not found");

  // Ø£ÙˆÙ„ Ø°ÙƒØ± ÙƒÙŠ ÙŠØ´ØªØºÙ„
  await sendZikr(channel);

  // ÙƒÙ„ Ø³Ø§Ø¹Ø©
  setInterval(async () => {
    try {
      await sendZikr(channel);
    } catch (err) {
      console.error("Error sending zikr:", err);
    }
  }, 60 * 60 * 1000);
});

client.login(TOKEN);
